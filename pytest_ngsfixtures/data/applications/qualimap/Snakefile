# -*- snakemake -*-
import os

configfile: "../config.yaml"
configfile: "config.yaml"

APPLICATION = "qualimap"

param = {
    'end': config['end'],
}

BAM = os.path.join("../{end}", config['input']['bam'])

rule qualimap_bamqc:
    input: bam=BAM, conda="qualimap-{version}.yaml"
    output: **config["qualimap"]["qualimap_bamqc"]["output"]
    conda: "qualimap-{version}.yaml"
    shell: "qualimap bamqc -bam {input.bam} -outdir {wildcards.version}/{wildcards.end} > $(basename {output}.log)"
           
include: "../fileutils.sm"
